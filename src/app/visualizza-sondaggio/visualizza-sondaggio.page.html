<ion-header>
  <ion-toolbar>
    <ion-button  slot="start" expand="block" fill="clear" (click)="goBack()" class="msg-btn">
      <ion-icon color="primary" slot="start" slot="icon-only" name="arrow-back-outline"></ion-icon>
    </ion-button>
      <ion-title *ngIf="currentUser===sondaggio.cod_utente">Dettagli del tuo sondaggio</ion-title>
      <ion-title  *ngIf="currentUser!==sondaggio.cod_utente">Dettagli del sondaggio</ion-title>
      <ion-button *ngIf="hasVoted === true" slot="end" expand="block" fill="clear" (click)="confermaVoto()" class="msg-btn">
        <ion-icon color="success" slot="end" slot="icon-only" name="checkmark-sharp"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>



<ion-content class = "backgrounds">
  <ion-refresher slot="fixed" (ionRefresh)="doNormalRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-card class = "backgrounds">    
    <ion-card-header>
      <ion-toolbar class="backgrounds">
          <ion-icon   class = "alarm_style" name="alarm-outline" slot= "start"></ion-icon>
           <ion-label class = "textTitle">{{sondaggio.timer}}</ion-label>
          <ion-button slot="end" expand="block" *ngIf="currentUser===sondaggio.cod_utente" (click) = "popUpEliminaSondaggio()" fill="clear">
            <ion-icon name="trash-sharp" color="primary" class = "icons_generic_style"></ion-icon>
          </ion-button>
          <ion-button slot="end" *ngIf="currentUser===sondaggio.cod_utente" (click) ="goModificaDomanda()" expand="block" fill="clear">
            <ion-icon name="hammer-sharp" color="primary" class = "icons_generic_style"></ion-icon>
          </ion-button>

        
        </ion-toolbar>
        <ion-toolbar class="backgrounds" *ngIf="currentUser!==sondaggio.cod_utente">
          <ion-avatar  slot="start" class="icon-avatar" >
            <img src="https://i.ytimg.com/vi/mCf6UGT3HrA/maxresdefault.jpg">
          </ion-avatar>
          <ion-label class = "username_text_style">{{profiloUserSondaggio.username}}</ion-label>

        </ion-toolbar>

      <ion-card-title class = "textTitleBIG">{{sondaggio.titolo}}</ion-card-title>
    </ion-card-header>



    <ion-card-content>
        <p class= "textSimple">{{descrizione}}</p>
   
        <ion-list  class = "backgrounds">
          <ion-radio-group >
          <ion-list-header> <ion-label >Voti totali: {{voti_totali}}</ion-label></ion-list-header>
          
            <div class = "backgrounds">
          
            <ion-item *ngFor="let scelta of scelte, let i = index">    
                <ion-radio *ngIf="currentUser!==sondaggio.cod_utente && votato === false" value = "{{scelta.descrizione}}" (click) = "getScelta(scelta.descrizione, i)" slot = "start" ></ion-radio>
                
                <ion-label *ngIf="currentUser===sondaggio.cod_utente" slot = "start" >{{scelta.num_favorevoli}}</ion-label>
                <ion-text  class="textSimple" slot = "start" >{{scelta.descrizione}}</ion-text>
                <ion-progress-bar slot = "start" *ngIf="currentUser===sondaggio.cod_utente || votato === true" [value]="percentualiScelte[i]" ></ion-progress-bar>
              </ion-item>

          </div>

        </ion-radio-group>

        </ion-list>
      


        <ion-toolbar>
          <ion-icon name="calendar-outline" slot = start class = "calendar_icon_style" ></ion-icon>
          <ion-label class= "description_text" slot = "start" >{{sondaggio.dataeora}}</ion-label>
          <ion-icon name="list" slot = "start"  class = "icon_list_style"></ion-icon>
          <ion-label class= "description_text" slot = "start" >{{categoria}}</ion-label>
           

      </ion-toolbar>
    </ion-card-content>
  </ion-card>
</ion-content>    

